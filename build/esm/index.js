function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function a(e,t,n){e.$$.on_destroy.push(i(t,n))}function c(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function d(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function h(){return p(" ")}function m(){return p("")}function g(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function v(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function w(e,t){e.value=null==t?"":t}function x(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function y(e,t,n){e.classList[n?"add":"remove"](t)}let b;function k(e){b=e}function _(){if(!b)throw new Error("Function called outside component initialization");return b}function T(e){_().$$.on_mount.push(e)}function F(){const e=_();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,l)}))}}}const S=[],E=[],z=[],P=[],C=Promise.resolve();let q=!1;function L(e){z.push(e)}function A(e){P.push(e)}let U=!1;const N=new Set;function O(){if(!U){U=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];k(t),R(t.$$)}for(k(null),S.length=0;E.length;)E.pop()();for(let e=0;e<z.length;e+=1){const t=z[e];N.has(t)||(N.add(t),t())}z.length=0}while(S.length);for(;P.length;)P.pop()();q=!1,U=!1,N.clear()}}function R(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const M=new Set;let j;function I(){j={r:0,c:[],p:j}}function K(){j.r||s(j.c),j=j.p}function D(e,t){e&&e.i&&(M.delete(e),e.i(t))}function H(e,t,n,s){if(e&&e.o){if(M.has(e))return;M.add(e),j.c.push((()=>{M.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function B(e,t){const n=t.token={};function s(e,s,l,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;void 0!==l&&(i=i.slice(),i[l]=o);const a=e&&(t.current=e)(i);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(I(),H(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),K())})):t.block.d(1),a.c(),D(a,1),a.m(t.mount(),t.anchor),c=!0),t.block=a,t.blocks&&(t.blocks[s]=a),c&&O()}if((l=e)&&"object"==typeof l&&"function"==typeof l.then){const n=_();if(e.then((e=>{k(n),s(t.then,1,t.value,e),k(null)}),(e=>{if(k(n),s(t.catch,2,t.error,e),k(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var l}function V(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function G(e){e&&e.c()}function J(e,n,o,i){const{fragment:a,on_mount:c,on_destroy:r,after_update:u}=e.$$;a&&a.m(n,o),i||L((()=>{const n=c.map(t).filter(l);r?r.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(L)}function X(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function W(e,t){-1===e.$$.dirty[0]&&(S.push(e),q||(q=!0,C.then(O)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Q(t,l,o,i,a,c,r=[-1]){const d=b;k(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:r,skip_bound:!1};let p=!1;if(f.ctx=o?o(t,l.props||{},((e,n,...s)=>{const l=s.length?s[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=l)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](l),p&&W(t,e)),n})):[],f.update(),p=!0,s(f.before_update),f.fragment=!!i&&i(f.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);f.fragment&&f.fragment.l(e),e.forEach(u)}else f.fragment&&f.fragment.c();l.intro&&D(t.$$.fragment),J(t,l.target,l.anchor,l.customElement),O()}k(d)}class Y{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Z(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="header__logo svelte-fa509d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 25.78" class="svelte-fa509d"><path d="M41.34 6.14a5.72 5.72 0 00-3.37-.97 5.54 5.54 0 00-3.33.97 4.9 4.9 0 00-1.07 1 1.58 1.58 0 00-1.58-1.59h-.18a.3.3 0 00-.3.31V24a.3.3 0 00.3.31h.42a1.61 1.61 0 001.61-1.61v-4.37a5.18 5.18 0 00.8.72 5.56 5.56 0 003.33 1 5.72 5.72 0 003.37-.96 6.59 6.59 0 002.17-2.65 8.96 8.96 0 00.76-3.79 8.85 8.85 0 00-.76-3.78 6.37 6.37 0 00-2.17-2.72zm0 9.15a4.11 4.11 0 01-1.37 1.89 3.6 3.6 0 01-2.3.69 3.63 3.63 0 01-3.69-2.58 8.39 8.39 0 01-.44-2.75 7.57 7.57 0 01.44-2.76 4.2 4.2 0 011.34-1.85 3.63 3.63 0 012.28-.66 3.96 3.96 0 012.37.69 4.3 4.3 0 011.38 1.9 7.32 7.32 0 01.44 2.68 7.45 7.45 0 01-.45 2.75z"></path><path d="M47.44 19.9h1.69a.3.3 0 00.31-.3V6.18a.3.3 0 00-.31-.3h-1.69a.3.3 0 00-.31.3V19.6a.3.3 0 00.31.3z"></path><path d="M81.31 15.38h1.7a.3.3 0 00.3-.31V6.26a.3.3 0 00-.3-.31h-1.7a.3.3 0 00-.3.31v8.8a.3.3 0 00.3.32z"></path><path d="M64.36 5.84h-1.97a.31.31 0 00-.27.14L58.4 11l-3.75-5.02a.44.44 0 00-.24-.14h-1.96a.31.31 0 00-.24.51l4.89 6.44-5 6.6a.32.32 0 00.25.52h1.96a.23.23 0 00.24-.14l3.85-5.2 3.86 5.23a.42.42 0 00.27.14h1.96a.31.31 0 00.24-.52l-4.99-6.6 4.89-6.44a.35.35 0 00-.27-.54z"></path><path d="M77.98 5.84h-1.96a.31.31 0 00-.28.14L72.03 11l-3.75-5.02a.44.44 0 00-.24-.14h-1.97a.31.31 0 00-.24.51l4.89 6.44-5.02 6.6a.32.32 0 00.24.52h1.96a.23.23 0 00.24-.14l3.85-5.2 3.86 5.2a.42.42 0 00.27.14h1.96a.31.31 0 00.24-.52l-4.99-6.6 4.89-6.44a.31.31 0 00-.24-.51z"></path><path d="M99.2 9.04a6.16 6.16 0 00-2.33-2.62 6.94 6.94 0 00-3.65-.96 6.68 6.68 0 00-3.58.93A6.26 6.26 0 0087.27 9a8.63 8.63 0 00-.83 3.9 8.58 8.58 0 00.83 3.84 6.4 6.4 0 002.34 2.62 7.37 7.37 0 007.22.03 6.16 6.16 0 002.34-2.61 8.63 8.63 0 00.83-3.89 8.05 8.05 0 00-.8-3.85zm-2.71 7.6a3.77 3.77 0 01-3.24 1.44 3.86 3.86 0 01-3.23-1.44 6.21 6.21 0 01-1.1-3.82 7.37 7.37 0 01.48-2.72 3.8 3.8 0 011.41-1.82 4.06 4.06 0 012.41-.66 3.84 3.84 0 013.23 1.41 6.1 6.1 0 011.07 3.79 5.92 5.92 0 01-1.03 3.82z"></path><path class="logoIcon svelte-fa509d" d="M81.31 19.77h1.7a.3.3 0 00.3-.31v-1.68a.3.3 0 00-.3-.31h-1.7a.3.3 0 00-.3.3v1.7a.3.3 0 00.3.3z"></path><path class="logoIcon svelte-fa509d" d="M13.18 25.78a13.48 13.48 0 01-6.75-1.82l-.68-.4v-3.4H2.27l-.41-.67A12.76 12.76 0 010 12.9 13.06 13.06 0 0113.18 0a13.06 13.06 0 0113.18 12.9 13.06 13.06 0 01-13.18 12.88zm-4.61-3.8a10.27 10.27 0 004.6 1.04A10.26 10.26 0 0023.54 12.9 10.23 10.23 0 0013.18 2.8 10.26 10.26 0 002.82 12.92a10.13 10.13 0 001.07 4.51h1.86v-4.5a7.37 7.37 0 017.43-7.28 7.37 7.37 0 017.43 7.27 7.37 7.37 0 01-7.43 7.27H8.57zm4.6-13.56a4.56 4.56 0 00-4.6 4.5v4.52h4.6a4.51 4.51 0 100-9.02z"></path></svg></div>',v(n,"class","header svelte-fa509d")},m(e,t){r(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}class ee extends Y{constructor(e){super(),Q(this,e,null,Z,o,{})}}const te=[];function ne(t,n=e){let s;const l=[];function i(e){if(o(t,e)&&(t=e,s)){const e=!te.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),te.push(n,t)}if(e){for(let e=0;e<te.length;e+=2)te[e][0](te[e+1]);te.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,a=e){const c=[o,a];return l.push(c),1===l.length&&(s=n(i)||e),o(t),()=>{const e=l.indexOf(c);-1!==e&&l.splice(e,1),0===l.length&&(s(),s=null)}}}}const se=ne(""),le=ne(""),oe=ne(""),ie=ne(""),ae=ne(""),ce=ne("preview"),re=ne(!1),ue=ne(!0);function de(t){let n,l,o,i,a,d,p;return{c(){n=f("div"),l=f("div"),o=f("input"),i=h(),a=f("label"),a.textContent="Search",v(o,"id","pixxio-search"),v(o,"type","text"),v(o,"placeholder"," "),v(o,"class","svelte-gmuv5t"),v(a,"for","pixxio-search"),v(a,"class","svelte-gmuv5t"),v(l,"class","field svelte-gmuv5t"),v(n,"class","searchField fields svelte-gmuv5t")},m(e,s){r(e,n,s),c(n,l),c(l,o),w(o,t[0]),c(l,i),c(l,a),d||(p=[g(o,"input",t[2]),g(o,"input",t[1])],d=!0)},p(e,[t]){1&t&&o.value!==e[0]&&w(o,e[0])},i:e,o:e,d(e){e&&u(n),d=!1,s(p)}}}function fe(e,t,n){let{value:s=""}=t,l=null;return e.$$set=e=>{"value"in e&&n(0,s=e.value)},[s,()=>{l&&clearTimeout(l),l=setTimeout((()=>{ae.update((()=>s))}),200)},function(){s=this.value,n(0,s)}]}class pe extends Y{constructor(e){super(),Q(this,e,fe,de,o,{value:0})}}function he(e){return{mediaspace:"Mediaspace (example.px.media)",username:"Username oder E-Mail",password:"Passwort",signin:"Anmelden",signin_description:"Bitte melde dich in dein pixxio System an um Dateien auszuwählen.",signin_error:"Ungültiger Benutzer oder Passwort",cancel:"Abbrechen",select:"Auswählen",selected:"ausgewählt",please_select:"Format wählen",original:"Original",preview:"Vorschau"}[e]}class me{accessToken="";refreshToken="";domain="";appKey="";v1=!1;constructor(){se.subscribe((e=>this.domain=e)),le.subscribe((e=>this.appKey=e)),oe.subscribe((e=>this.refreshToken=e)),ie.subscribe((e=>this.accessToken=e)),re.subscribe((e=>this.v1=e))}get(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("get",e,t,n,s,l,o)}post(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("post",e,t,n,s,l,o)}put(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("put",e,t,n,s,l,o)}delete(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("delete",e,t,n,s,l,o)}callAccessToken(){return new Promise(((e,t)=>{let n={refreshToken:this.refreshToken,applicationKey:this.appKey};this.v1&&(n={refreshToken:this.refreshToken,apiKey:this.appKey}),this.post("/accessToken",n,!1).then((n=>{n.success?(this.accessToken=n.accessToken,ie.update((()=>n.accessToken)),e()):t()})).catch(t)}))}call(e,t,n={},s=!0,l=null,o=!0,i=!0){return new Promise(((a,c)=>{const r=(s,r)=>{const u=this.domain+(this.v1?"/cgi-bin/api/pixxio-api.pl/json":"/gobackend")+t;this.v1&&this.accessToken&&(s.accessToken=this.accessToken);let d=s;if(i){d=new URLSearchParams;for(const e of Object.keys(s)){let t=s[e];"object"==typeof t&&(t=JSON.stringify(t)),d.set(e,t)}d=d.toString()}r||(r={}),o&&(r["Content-Type"]="application/x-www-form-urlencoded"),l&&(r={...r,...l});let f={url:u,request:{method:"post",headers:r,body:d}};switch(e){case"get":f={url:u+"?"+d,request:{headers:r}};break;case"put":f={url:u,request:{method:"put",headers:r,body:d}};break;case"delete":f={url:u,request:{method:"delete",headers:r,body:d}}}fetch(f.url,f.request).then((e=>e.json())).then((s=>{if(!0===s.success||"true"===s.success)a(s);else switch(s.errorcode){case"2003":case"2006":case 15007:case 15008:this.callAccessToken().then((()=>{this.call(e,t,n).subscribe((e=>{a(e)}))}));break;case 5266:default:c(s.errormessage)}})).catch((e=>c()))};if(s){const e=this.accessToken;let t={};this.v1?n.accessToken=e:t={Authorization:"Key "+e},r(n,t)}else r(n)}))}}function ge(t){let n;return{c(){n=f("div"),n.innerHTML='<div class="svelte-2yi7ym"><svg xmlns="http://www.w3.org/2000/svg" id="pixxioIcon" viewBox="0 0 76.52 76.52" class="svelte-2yi7ym"><path stroke="black" stroke-width="5" d="M24.76 50.76v-13c0-7.17 5.94-13 13.25-13s13.25 5.83 13.25 13c0 7.18-5.94 13-13.25 13H26.27l-11.17.38s-3.34-8.2-3.34-12.88a26.51 26.51 0 0126.5-26.5 26.51 26.51 0 0126.5 26.5 26.51 26.51 0 01-26.5 26.5c-4.85 0-9.58-1.3-13.5-3.6z" fill="none" class="svelte-2yi7ym"></path></svg></div>',v(n,"id","pixxio-ta-loading"),v(n,"class","svelte-2yi7ym")},m(e,t){r(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}class ve extends Y{constructor(e){super(),Q(this,e,null,ge,o,{})}}function $e(e){let t,n,s,l,o,i;return{c(){t=f("div"),n=f("input"),s=h(),l=f("label"),l.textContent=`${he("mediaspace")}`,v(n,"id","pixxio-mediaspace"),n.disabled=e[3],v(n,"type","text"),v(n,"placeholder"," "),v(n,"class","svelte-edk9sc"),v(l,"for","pixxio-mediaspace"),v(l,"class","svelte-edk9sc"),v(t,"class","field svelte-edk9sc")},m(a,u){r(a,t,u),c(t,n),w(n,e[4]),c(t,s),c(t,l),o||(i=g(n,"input",e[14]),o=!0)},p(e,t){8&t&&(n.disabled=e[3]),16&t&&n.value!==e[4]&&w(n,e[4])},d(e){e&&u(t),o=!1,i()}}}function we(t){let n;return{c(){n=f("small"),n.textContent=`${he("signin_error")}`,v(n,"class","error svelte-edk9sc")},m(e,t){r(e,n,t)},p:e,d(e){e&&u(n)}}}function xe(e){let t,n;return t=new ve({}),{c(){G(t.$$.fragment)},m(e,s){J(t,e,s),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function ye(e){let t,n,o,i,a,d,m,$,x,y,b,k,_,T,F,S,E,z,P,C,q,L,A,U,N,O,R=he("signin")+"",M=e[6]&&$e(e),j=e[2]&&we(),B=e[3]&&xe();return{c(){t=f("div"),n=f("h2"),n.textContent=`${he("signin")}`,o=h(),i=f("p"),i.textContent=`${he("signin_description")}`,a=h(),M&&M.c(),d=h(),m=f("div"),$=f("input"),x=h(),y=f("label"),y.textContent=`${he("username")}`,b=h(),k=f("div"),_=f("input"),T=h(),F=f("label"),F.textContent=`${he("password")}`,S=h(),j&&j.c(),E=h(),z=f("div"),P=f("button"),P.textContent=`${he("cancel")}`,C=h(),q=f("button"),L=p(R),A=h(),B&&B.c(),v(n,"class","svelte-edk9sc"),v(i,"class","svelte-edk9sc"),v($,"id","pixxio-username"),$.disabled=e[3],v($,"type","text"),v($,"placeholder"," "),v($,"class","svelte-edk9sc"),v(y,"for","pixxio-username"),v(y,"class","svelte-edk9sc"),v(m,"class","field svelte-edk9sc"),v(_,"id","pixxio-password"),_.disabled=e[3],v(_,"type","password"),v(_,"placeholder"," "),v(_,"class","svelte-edk9sc"),v(F,"for","pixxio-password"),v(F,"class","svelte-edk9sc"),v(k,"class","field svelte-edk9sc"),v(P,"class","button button--secondary svelte-edk9sc"),v(q,"class","button svelte-edk9sc"),v(q,"type","submit"),q.disabled=e[3],v(z,"class","buttonGroup svelte-edk9sc"),v(t,"class","login fields svelte-edk9sc")},m(s,u){r(s,t,u),c(t,n),c(t,o),c(t,i),c(t,a),M&&M.m(t,null),c(t,d),c(t,m),c(m,$),w($,e[0]),c(m,x),c(m,y),c(t,b),c(t,k),c(k,_),w(_,e[1]),c(k,T),c(k,F),c(t,S),j&&j.m(t,null),c(t,E),c(t,z),c(z,P),c(z,C),c(z,q),c(q,L),c(t,A),B&&B.m(t,null),U=!0,N||(O=[g($,"input",e[15]),g(_,"input",e[16]),g(P,"click",e[9]),g(q,"click",(function(){l(e[5]?e[8]:e[7])&&(e[5]?e[8]:e[7]).apply(this,arguments)}))],N=!0)},p(n,[s]){(e=n)[6]?M?M.p(e,s):(M=$e(e),M.c(),M.m(t,d)):M&&(M.d(1),M=null),(!U||8&s)&&($.disabled=e[3]),1&s&&$.value!==e[0]&&w($,e[0]),(!U||8&s)&&(_.disabled=e[3]),2&s&&_.value!==e[1]&&w(_,e[1]),e[2]?j?j.p(e,s):(j=we(),j.c(),j.m(t,E)):j&&(j.d(1),j=null),(!U||8&s)&&(q.disabled=e[3]),e[3]?B?8&s&&D(B,1):(B=xe(),B.c(),D(B,1),B.m(t,null)):B&&(I(),H(B,1,1,(()=>{B=null})),K())},i(e){U||(D(B),U=!0)},o(e){H(B),U=!1},d(e){e&&u(t),M&&M.d(),j&&j.d(),B&&B.d(),N=!1,s(O)}}}function be(t,n,s){let l,o,c,r,u,d,f,p,h=e;a(t,se,(e=>s(10,u=e))),a(t,le,(e=>s(11,d=e))),a(t,re,(e=>s(12,f=e))),t.$$.on_destroy.push((()=>h()));const m=F(),g=new me;let v="",$="",w=!1,x=!1,y="";const b=sessionStorage.getItem("refreshToken");b&&(x=!0,oe.update((()=>b)),g.callAccessToken().then((()=>{s(3,x=!1),m("authenticated")})).catch((e=>{oe.update((()=>"")),s(3,x=!1)})));return t.$$.update=()=>{1024&t.$$.dirty&&(l=u),2048&t.$$.dirty&&(o=d),4096&t.$$.dirty&&s(5,c=f),8192&t.$$.dirty&&(s(6,r=p),h(),h=i(r,(e=>s(13,p=e))))},[v,$,w,x,y,c,r,async()=>{s(3,x=!0),s(2,w=!1);try{const e=new FormData;e.set("applicationKey",o),e.set("userNameOrEmail",v),e.set("password",$);const t=await fetch(`${l}/gobackend/login`,{method:"POST",body:e}),n=await t.json();if(s(3,x=!1),!n.success)throw s(2,w=!0),new Error;oe.update((()=>n.refreshToken)),sessionStorage.setItem("refreshToken",n.refreshToken),g.callAccessToken().then((()=>{m("authenticated")}))}catch(e){s(3,x=!1),s(2,w=!0)}},async()=>{s(3,x=!0),s(2,w=!1);try{const e=new FormData;e.set("apiKey",o),e.set("options",JSON.stringify({username:v,password:$}));const t={apiKey:o,options:{username:v,password:$}};let n=new URLSearchParams;for(const e of Object.keys(t)){let s=t[e];"object"==typeof s&&(s=JSON.stringify(s)),n.set(e,s)}n=n.toString();const i=await fetch(`${l}/cgi-bin/api/pixxio-api.pl/json/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n}),a=await i.json();if(s(3,x=!1),"true"!==a.success)throw s(2,w=!0),new Error;oe.update((()=>a.refreshToken)),sessionStorage.setItem("refreshToken",a.refreshToken),g.callAccessToken().then((()=>{m("authenticated")}))}catch(e){s(3,x=!1),s(2,w=!0)}},()=>{m("cancel")},u,d,f,p,function(){y=this.value,s(4,y)},function(){v=this.value,s(0,v)},function(){$=this.value,s(1,$)}]}class ke extends Y{constructor(e){super(),Q(this,e,be,ye,o,{})}}function _e(e,t,n){const s=e.slice();return s[13]=t[n],s}function Te(t){let n,l,o,i,a,p,$,w,y,b=t[4]&&function(t){let n;return{c(){n=f("option"),n.textContent=`${he("preview")}`,n.__value="preview",n.value=n.__value},m(e,t){r(e,n,t)},p:e,d(e){e&&u(n)}}}(),k=t[3]&&function(t){let n;return{c(){n=f("option"),n.textContent=`${he("original")}`,n.__value="original",n.value=n.__value},m(e,t){r(e,n,t)},p:e,d(e){e&&u(n)}}}(),_=t[1],T=[];for(let e=0;e<_.length;e+=1)T[e]=Fe(_e(t,_,e));return{c(){n=f("div"),l=f("div"),o=f("select"),b&&b.c(),i=m(),k&&k.c(),a=m();for(let e=0;e<T.length;e+=1)T[e].c();p=h(),$=f("label"),$.textContent=`${he("please_select")}`,v(o,"name",""),v(o,"id","pixxioDownloadFormats__dropdown"),v(o,"placeholder"," "),v(o,"class","svelte-1x1v299"),void 0===t[0]&&L((()=>t[7].call(o))),v($,"for","pixxioDownloadFormats__dropdown"),v($,"class","svelte-1x1v299"),v(l,"class","field svelte-1x1v299"),v(n,"class","downloadFormats fields svelte-1x1v299")},m(e,s){r(e,n,s),c(n,l),c(l,o),b&&b.m(o,null),c(o,i),k&&k.m(o,null),c(o,a);for(let e=0;e<T.length;e+=1)T[e].m(o,null);x(o,t[0]),c(l,p),c(l,$),w||(y=[g(o,"change",t[7]),g(o,"blur",t[5])],w=!0)},p(e,t){if(e[4]&&b.p(e,t),e[3]&&k.p(e,t),2&t){let n;for(_=e[1],n=0;n<_.length;n+=1){const s=_e(e,_,n);T[n]?T[n].p(s,t):(T[n]=Fe(s),T[n].c(),T[n].m(o,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=_.length}3&t&&x(o,e[0])},d(e){e&&u(n),b&&b.d(),k&&k.d(),d(T,e),w=!1,s(y)}}}function Fe(e){let t,n,s,l=e[13].name+"";return{c(){t=f("option"),n=p(l),t.__value=s=e[13].id,t.value=t.__value},m(e,s){r(e,t,s),c(t,n)},p(e,o){2&o&&l!==(l=e[13].name+"")&&$(n,l),2&o&&s!==(s=e[13].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&u(t)}}}function Se(t){let n,s=!t[2]&&Te(t);return{c(){s&&s.c(),n=m()},m(e,t){s&&s.m(e,t),r(e,n,t)},p(e,[t]){e[2]?s&&(s.d(1),s=null):s?s.p(e,t):(s=Te(e),s.c(),s.m(n.parentNode,n))},i:e,o:e,d(e){s&&s.d(e),e&&u(n)}}}function Ee(e,t,n){let{allowedFormats:s=null}=t;F();const l=new me;let o,i=[],a=!1,c=null===s||null!==s&&s.includes("original"),r=null===s||null!==s&&s.includes("preview"),u=!1;T((()=>{s&&1===s.length?(n(0,o=s[0]),ce.update((()=>s[0])),n(2,u=!0)):(f(),d())}));const d=()=>{ce.update((()=>o))},f=async()=>{try{a=!0;const e={responseFields:["id","name"]},t=await l.get("/downloadFormats",e);if(!t.success)throw new Error(t.errormessage);n(1,i=t.downloadFormats.filter((e=>null===s||null!==s&&s.includes(e.id)))),a=!1}catch(e){a=!1}};return e.$$set=e=>{"allowedFormats"in e&&n(6,s=e.allowedFormats)},[o,i,u,c,r,d,s,function(){o=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,o),n(1,i)}]}class ze extends Y{constructor(e){super(),Q(this,e,Ee,Se,o,{allowedFormats:6})}}function Pe(e,t,n){const s=e.slice();return s[3]=t[n],s}function Ce(e){let t,n,s,o,i,a;return{c(){t=f("li"),n=f("img"),v(n,"loading","lazy"),n.src!==(s=e[3].imagePath||e[3].modifiedPreviewFileURLs[0])&&v(n,"src",s),v(n,"alt",o=e[3].fileName),v(n,"class","svelte-2dn8sz"),v(t,"class","pixxioSelection__file svelte-2dn8sz")},m(s,o){r(s,t,o),c(t,n),i||(a=g(t,"click",(function(){l(e[2]("deselect",e[3]))&&e[2]("deselect",e[3]).apply(this,arguments)})),i=!0)},p(t,l){e=t,2&l&&n.src!==(s=e[3].imagePath||e[3].modifiedPreviewFileURLs[0])&&v(n,"src",s),2&l&&o!==(o=e[3].fileName)&&v(n,"alt",o)},d(e){e&&u(t),i=!1,a()}}}function qe(e){let t,n,s,l=e[0].length-e[1].length+"";return{c(){t=f("li"),n=p("+ "),s=p(l),v(t,"class","svelte-2dn8sz")},m(e,l){r(e,t,l),c(t,n),c(t,s)},p(e,t){3&t&&l!==(l=e[0].length-e[1].length+"")&&$(s,l)},d(e){e&&u(t)}}}function Le(t){let n,s,l=t[1],o=[];for(let e=0;e<l.length;e+=1)o[e]=Ce(Pe(t,l,e));let i=t[0].length>3&&qe(t);return{c(){n=f("ul");for(let e=0;e<o.length;e+=1)o[e].c();s=h(),i&&i.c(),v(n,"class","svelte-2dn8sz")},m(e,t){r(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null);c(n,s),i&&i.m(n,null)},p(e,[t]){if(6&t){let i;for(l=e[1],i=0;i<l.length;i+=1){const a=Pe(e,l,i);o[i]?o[i].p(a,t):(o[i]=Ce(a),o[i].c(),o[i].m(n,s))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}e[0].length>3?i?i.p(e,t):(i=qe(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:e,o:e,d(e){e&&u(n),d(o,e),i&&i.d()}}}function Ae(e,t,n){let s;const l=F();let{selectedFiles:o=[]}=t;return e.$$set=e=>{"selectedFiles"in e&&n(0,o=e.selectedFiles)},e.$$.update=()=>{1&e.$$.dirty&&n(1,s=o.slice(0,3))},[o,s,l]}class Ue extends Y{constructor(e){super(),Q(this,e,Ae,Le,o,{selectedFiles:0})}}function Ne(e){let t,n,s,l,o,i,a,d,m,w,x,b=e[0].fileName+"";return{c(){t=f("li"),n=f("figure"),s=f("div"),l=f("img"),a=h(),d=f("figcaption"),m=p(b),v(l,"loading","lazy"),l.src!==(o=e[0].imagePath||e[0].modifiedPreviewFileURLs[0])&&v(l,"src",o),v(l,"alt",i=e[0].fileName),v(l,"class","svelte-e9o60a"),v(s,"class","pixxioSquare svelte-e9o60a"),y(s,"pixxioSquare--active",e[0].selected),v(d,"class","svelte-e9o60a"),v(n,"class","svelte-e9o60a"),v(t,"class","svelte-e9o60a")},m(o,i){r(o,t,i),c(t,n),c(n,s),c(s,l),c(n,a),c(n,d),c(d,m),w||(x=g(t,"click",e[3]),w=!0)},p(e,t){1&t&&l.src!==(o=e[0].imagePath||e[0].modifiedPreviewFileURLs[0])&&v(l,"src",o),1&t&&i!==(i=e[0].fileName)&&v(l,"alt",i),1&t&&y(s,"pixxioSquare--active",e[0].selected),1&t&&b!==(b=e[0].fileName+"")&&$(m,b)},d(e){e&&u(t),w=!1,x()}}}function Oe(t){let n,s=t[0]&&Ne(t);return{c(){s&&s.c(),n=m()},m(e,t){s&&s.m(e,t),r(e,n,t)},p(e,[t]){e[0]?s?s.p(e,t):(s=Ne(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:e,o:e,d(e){s&&s.d(e),e&&u(n)}}}function Re(e,t,n){let{file:s=null}=t,{selected:l=!1}=t;const o=F(),i=()=>{o(l?"deselect":"select",s)};return e.$$set=e=>{"file"in e&&n(0,s=e.file),"selected"in e&&n(2,l=e.selected)},[s,i,l,()=>i()]}class Me extends Y{constructor(e){super(),Q(this,e,Re,Oe,o,{file:0,selected:2})}}function je(e,t,n){const s=e.slice();return s[34]=t[n],s[35]=t,s[36]=n,s}function Ie(t){let n;return{c(){n=p("error")},m(e,t){r(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}function Ke(e){let t,n,l,o,i,a,m,w,x,b,k,_,T,F,S,z,P,C,q,L,U,N,O,R,M,j,B,W,Q,Y=e[1]?"/"+e[1]:"",Z=he("selected")+"",ee=he("select")+"",te=e[5],ne=[];for(let t=0;t<te.length;t+=1)ne[t]=De(je(e,te,t));const se=e=>H(ne[e],1,1,(()=>{ne[e]=null}));function le(t){e[20](t)}let oe={};function ie(t){e[21](t)}void 0!==e[0]&&(oe.allowedFormats=e[0]),i=new ze({props:oe}),E.push((()=>V(i,"allowedFormats",le)));let ae={};return void 0!==e[2]&&(ae.selectedFiles=e[2]),P=new Ue({props:ae}),E.push((()=>V(P,"selectedFiles",ie))),P.$on("deselect",e[13]),{c(){t=f("section"),n=f("ul");for(let e=0;e<ne.length;e+=1)ne[e].c();var s,a,c;l=h(),o=f("div"),G(i.$$.fragment),m=h(),w=f("div"),x=f("p"),b=f("strong"),k=p(e[3]),_=h(),T=p(Y),F=h(),S=p(Z),z=h(),G(P.$$.fragment),q=h(),L=f("span"),U=h(),N=f("button"),N.textContent=`${he("cancel")}`,O=h(),R=f("button"),M=p(ee),v(n,"class","svelte-187qga6"),v(t,"class","pixxioFiles__container svelte-187qga6"),y(t,"pixxioFiles__container--maxReached",e[7]),v(o,"class","pixxioFormats svelte-187qga6"),s="flex-grow",a="1",L.style.setProperty(s,a,c?"important":""),v(N,"class","button button--secondary svelte-187qga6"),v(R,"class","button svelte-187qga6"),v(R,"type","submit"),R.disabled=j=!e[8]||e[6],v(w,"class","buttonGroup buttonGroup--right svelte-187qga6")},m(s,a){r(s,t,a),c(t,n);for(let e=0;e<ne.length;e+=1)ne[e].m(n,null);r(s,l,a),r(s,o,a),J(i,o,null),r(s,m,a),r(s,w,a),c(w,x),c(x,b),c(b,k),c(x,_),c(x,T),c(x,F),c(x,S),c(w,z),J(P,w,null),c(w,q),c(w,L),c(w,U),c(w,N),c(w,O),c(w,R),c(R,M),B=!0,W||(Q=[g(t,"scroll",e[11]),g(N,"click",e[22]),g(R,"click",e[14])],W=!0)},p(e,s){if(12320&s[0]){let t;for(te=e[5],t=0;t<te.length;t+=1){const l=je(e,te,t);ne[t]?(ne[t].p(l,s),D(ne[t],1)):(ne[t]=De(l),ne[t].c(),D(ne[t],1),ne[t].m(n,null))}for(I(),t=te.length;t<ne.length;t+=1)se(t);K()}128&s[0]&&y(t,"pixxioFiles__container--maxReached",e[7]);const l={};!a&&1&s[0]&&(a=!0,l.allowedFormats=e[0],A((()=>a=!1))),i.$set(l),(!B||8&s[0])&&$(k,e[3]),(!B||2&s[0])&&Y!==(Y=e[1]?"/"+e[1]:"")&&$(T,Y);const o={};!C&&4&s[0]&&(C=!0,o.selectedFiles=e[2],A((()=>C=!1))),P.$set(o),(!B||320&s[0]&&j!==(j=!e[8]||e[6]))&&(R.disabled=j)},i(e){if(!B){for(let e=0;e<te.length;e+=1)D(ne[e]);D(i.$$.fragment,e),D(P.$$.fragment,e),B=!0}},o(e){ne=ne.filter(Boolean);for(let e=0;e<ne.length;e+=1)H(ne[e]);H(i.$$.fragment,e),H(P.$$.fragment,e),B=!1},d(e){e&&u(t),d(ne,e),e&&u(l),e&&u(o),X(i),e&&u(m),e&&u(w),X(P),W=!1,s(Q)}}}function De(e){let t,n,s,l;function o(t){e[18](t,e[34],e[35],e[36])}function i(t){e[19](t,e[34])}let a={};return void 0!==e[34]&&(a.file=e[34]),void 0!==e[34].selected&&(a.selected=e[34].selected),t=new Me({props:a}),E.push((()=>V(t,"file",o))),E.push((()=>V(t,"selected",i))),t.$on("select",e[12]),t.$on("deselect",e[13]),{c(){G(t.$$.fragment)},m(e,n){J(t,e,n),l=!0},p(l,o){e=l;const i={};!n&&32&o[0]&&(n=!0,i.file=e[34],A((()=>n=!1))),!s&&32&o[0]&&(s=!0,i.selected=e[34].selected,A((()=>s=!1))),t.$set(i)},i(e){l||(D(t.$$.fragment,e),l=!0)},o(e){H(t.$$.fragment,e),l=!1},d(e){X(t,e)}}}function He(t){let n,s;return n=new ve({}),{c(){G(n.$$.fragment)},m(e,t){J(n,e,t),s=!0},p:e,i(e){s||(D(n.$$.fragment,e),s=!0)},o(e){H(n.$$.fragment,e),s=!1},d(e){X(n,e)}}}function Be(e){let t,n,s,l={ctx:e,current:null,token:null,hasCatch:!0,pending:He,then:Ke,catch:Ie,blocks:[,,,]};return B(n=e[4],l),{c(){t=f("div"),l.block.c(),v(t,"class","pixxioFiles svelte-187qga6"),y(t,"no-modal",!e[9])},m(e,n){r(e,t,n),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=null,s=!0},p(s,o){if(e=s,l.ctx=e,16&o[0]&&n!==(n=e[4])&&B(n,l));else{const t=e.slice();l.block.p(t,o)}512&o[0]&&y(t,"no-modal",!e[9])},i(e){s||(D(l.block),s=!0)},o(e){for(let e=0;e<3;e+=1){H(l.blocks[e])}s=!1},d(e){e&&u(t),l.block.d(),l.token=null,l=null}}}function Ve(e,t,n){let s,l,o,i,c,r,u,d;a(e,ce,(e=>n(16,r=e))),a(e,re,(e=>n(17,u=e))),a(e,ue,(e=>n(9,d=e)));const f=F(),p=new me;let{max:h=0}=t,{allowedTypes:m=[]}=t,{allowedFormats:g=null}=t,v=null,$=1,w=[],x=0,y=!1,b="",k=[];T((()=>{n(4,v=c?_():S()),ae.subscribe((e=>{b=e,c?_():S()}))}));const _=async e=>{try{n(6,y=!0);const t={pagination:"50-"+$,...b?{searchTerm:b}:{}},s=await p.get("/files",{options:t});if("true"!==s.success)throw new Error(s.errormessage);s.files=s.files.map((e=>(e.selected=k.find((t=>t.id===e.id)),e))),e?n(5,w=[...w,...s.files]):(n(5,w=s.files),x=s.quantity),n(6,y=!1)}catch(e){n(6,y=!1)}},S=async e=>{try{n(6,y=!0);let t=[],s=[];m.length&&(t=[{filterType:"connectorOr",filters:[...m.map((e=>({filterType:"fileExtension",fileExtension:e})))]}]),b&&(s=[{filterType:"searchTerm",term:b}]);let l={filter:{filterType:"connectorAnd",filters:[...s,...t]}};const o={page:$,pageSize:50,responseFields:["id","modifiedPreviewFileURLs","previewFileURL","originalFileURL","width","height","fileName","fileExtension","uploadDate","modifyDate","rating","userID","fileSize","dominantColor"],previewFileOptions:[{height:400,quality:60}],...l},i=await p.get("/files",o);if(!i.success)throw new Error(i.errormessage);i.files=i.files.map((e=>(e.selected=k.find((t=>t.id===e.id)),e))),e?n(5,w=[...w,...i.files]):(n(5,w=i.files),x=i.quantity),n(6,y=!1)}catch(e){console.log(e),n(6,y=!1)}},E=()=>{w.forEach((e=>{e.selected=!1})),n(5,w),k.forEach((e=>{w.find((t=>t.id==e.id)).selected=!0,n(5,w)}))},z=async e=>{const t=await p.get("/files/convert",{ids:[e],downloadType:"downloadFormat",downloadFormatID:i}),n=async()=>{const e=await p.get("/files/download",{downloadID:t.downloadID});return e.downloadURL?e.downloadURL:await new Promise((e=>{setTimeout((()=>n().then((t=>e(t)))),100)}))};return await n()};return e.$$set=e=>{"max"in e&&n(1,h=e.max),"allowedTypes"in e&&n(15,m=e.allowedTypes),"allowedFormats"in e&&n(0,g=e.allowedFormats)},e.$$.update=()=>{4&e.$$.dirty[0]&&n(3,s=k.length),10&e.$$.dirty[0]&&n(7,l=s>=h&&h),65544&e.$$.dirty[0]&&n(8,o=s>=1&&r),65536&e.$$.dirty[0]&&(i=r),131072&e.$$.dirty[0]&&(c=u)},[g,h,k,s,v,w,y,l,o,d,f,e=>{if(y||w.length>=x)return;e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight<e.target.offsetHeight/2&&($+=1,c?_(!0):S(!0))},e=>{w.find((t=>t.id===e.detail.id)).selected=!0,n(5,w),n(2,k=[e.detail,...k.slice(0,h-1)]),E()},e=>{n(2,k=k.filter((t=>t.id!==e.detail.id))),E()},async()=>{const e=[];n(6,y=!0);for(let t=0;t<k.length;t+=1){const n=k[t];let s="",l="";c?(s="preview"===i?n.imagePath:n.originalPath,l=n.imagePath):(s="preview"===i?n.previewFileURL:n.originalFileURL,l=n.modifiedPreviewFileURLs[0]),["preview","original"].includes(i)||(s=await z(n.id)),e.push({id:n.id,url:s,thumbnail:l})}n(6,y=!1),f("submit",e)},m,r,u,function(e,t,s,l){s[l]=e,n(5,w)},function(t,s){e.$$.not_equal(s.selected,t)&&(s.selected=t,n(5,w))},function(e){g=e,n(0,g)},function(e){k=e,n(2,k)},()=>f("cancel")]}class Ge extends Y{constructor(e){super(),Q(this,e,Ve,Be,o,{max:1,allowedTypes:15,allowedFormats:0},[-1,-1])}}function Je(e){let t,n,s,l,o,i,a,d,p=e[3]&&Xe(),m=e[6]&&We(e);const g=[Ye,Qe],$=[];function w(e,t){return e[6]?1:0}return i=w(e),a=$[i]=g[i](e),{c(){t=f("main"),n=f("div"),s=f("header"),p&&p.c(),l=h(),m&&m.c(),o=h(),a.c(),v(s,"class","svelte-l5fo31"),v(n,"class","container svelte-l5fo31"),y(n,"container--enlarge",e[8]),v(t,"class","svelte-l5fo31"),y(t,"no-modal",!e[4].modal)},m(e,a){r(e,t,a),c(t,n),c(n,s),p&&p.m(s,null),c(s,l),m&&m.m(s,null),c(n,o),$[i].m(n,null),d=!0},p(e,o){e[3]?p?8&o&&D(p,1):(p=Xe(),p.c(),D(p,1),p.m(s,l)):p&&(I(),H(p,1,1,(()=>{p=null})),K()),e[6]?m?(m.p(e,o),64&o&&D(m,1)):(m=We(e),m.c(),D(m,1),m.m(s,null)):m&&(I(),H(m,1,1,(()=>{m=null})),K());let c=i;i=w(e),i===c?$[i].p(e,o):(I(),H($[c],1,1,(()=>{$[c]=null})),K(),a=$[i],a?a.p(e,o):(a=$[i]=g[i](e),a.c()),D(a,1),a.m(n,null)),256&o&&y(n,"container--enlarge",e[8]),16&o&&y(t,"no-modal",!e[4].modal)},i(e){d||(D(p),D(m),D(a),d=!0)},o(e){H(p),H(m),H(a),d=!1},d(e){e&&u(t),p&&p.d(),m&&m.d(),$[i].d()}}}function Xe(e){let t,n;return t=new ee({}),{c(){G(t.$$.fragment)},m(e,s){J(t,e,s),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function We(e){let t,n,s;function l(t){e[12](t)}let o={};return void 0!==e[7]&&(o.value=e[7]),t=new pe({props:o}),E.push((()=>V(t,"value",l))),{c(){G(t.$$.fragment)},m(e,n){J(t,e,n),s=!0},p(e,s){const l={};!n&&128&s&&(n=!0,l.value=e[7],A((()=>n=!1))),t.$set(l)},i(e){s||(D(t.$$.fragment,e),s=!0)},o(e){H(t.$$.fragment,e),s=!1},d(e){X(t,e)}}}function Qe(e){let t,n,s,l,o,i;function a(t){e[13](t)}function c(t){e[14](t)}function d(t){e[15](t)}let p={};return void 0!==e[1]&&(p.allowedTypes=e[1]),void 0!==e[2]&&(p.allowedFormats=e[2]),void 0!==e[0]&&(p.max=e[0]),n=new Ge({props:p}),E.push((()=>V(n,"allowedTypes",a))),E.push((()=>V(n,"allowedFormats",c))),E.push((()=>V(n,"max",d))),n.$on("cancel",e[10]),n.$on("submit",e[11]),{c(){t=f("section"),G(n.$$.fragment)},m(e,s){r(e,t,s),J(n,t,null),i=!0},p(e,t){const i={};!s&&2&t&&(s=!0,i.allowedTypes=e[1],A((()=>s=!1))),!l&&4&t&&(l=!0,i.allowedFormats=e[2],A((()=>l=!1))),!o&&1&t&&(o=!0,i.max=e[0],A((()=>o=!1))),n.$set(i)},i(e){i||(D(n.$$.fragment,e),i=!0)},o(e){H(n.$$.fragment,e),i=!1},d(e){e&&u(t),X(n)}}}function Ye(t){let n,s,l;return s=new ke({}),s.$on("cancel",t[10]),s.$on("authenticated",t[9]),{c(){n=f("section"),G(s.$$.fragment)},m(e,t){r(e,n,t),J(s,n,null),l=!0},p:e,i(e){l||(D(s.$$.fragment,e),l=!0)},o(e){H(s.$$.fragment,e),l=!1},d(e){e&&u(n),X(s)}}}function Ze(e){let t,n,s,l,o,i=e[5]&&Je(e);return{c(){i&&i.c(),t=h(),n=f("link"),s=f("link"),l=f("style"),l.textContent="/* Global CSS via SASS */\n#pixxio-integration {\n  font-family: 'Heebo', Arial, Helvetica, sans-serif;\n  font-size: 16px;\n  all: initial; }",v(n,"rel","preconnect"),v(n,"href","https://fonts.gstatic.com"),v(n,"crossorigin",""),v(s,"href","https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&family=Work+Sans:wght@400;500&display=swap"),v(s,"rel","stylesheet"),v(l,"lang","scss")},m(e,a){i&&i.m(e,a),r(e,t,a),c(document.head,n),c(document.head,s),c(document.head,l),o=!0},p(e,[n]){e[5]?i?(i.p(e,n),32&n&&D(i,1)):(i=Je(e),i.c(),D(i,1),i.m(t.parentNode,t)):i&&(I(),H(i,1,1,(()=>{i=null})),K())},i(e){o||(D(i),o=!0)},o(e){H(i),o=!1},d(e){i&&i.d(e),e&&u(t),u(n),u(s),u(l)}}}function et(e,t,n){let s,{standalone:l=!1}=t,{config:o={appUrl:"",appKey:"",v1:!1,modal:!0}}=t,{show:i=!1}=t,{max:a=0}=t,{allowedTypes:c=[]}=t,{allowedFormats:r=null}=t;const u=F();T((async()=>{se.update((()=>o.appUrl)),le.update((()=>o.appKey)),re.update((()=>o.v1||!1)),ue.update((()=>o.modal))}));let d=!1,f="";return e.$$set=e=>{"standalone"in e&&n(3,l=e.standalone),"config"in e&&n(4,o=e.config),"show"in e&&n(5,i=e.show),"max"in e&&n(0,a=e.max),"allowedTypes"in e&&n(1,c=e.allowedTypes),"allowedFormats"in e&&n(2,r=e.allowedFormats)},e.$$.update=()=>{64&e.$$.dirty&&n(8,s=d)},[a,c,r,l,o,i,d,f,s,()=>{n(6,d=!0)},()=>{u("cancel")},({detail:e})=>{u("submit",e)},function(e){f=e,n(7,f)},function(e){c=e,n(1,c)},function(e){r=e,n(2,r)},function(e){a=e,n(0,a)}]}class tt extends Y{constructor(e){super(),Q(this,e,et,Ze,o,{standalone:3,config:4,show:5,max:0,allowedTypes:1,allowedFormats:2})}}class nt{constructor(e={},t="en"){this.config=e,this.boot(),this.app=new tt({target:this.element,props:{standalone:!0,config:e}})}boot(){if(this.config.element)this.element=this.config.element;else{const e=document.createElement("div");e.id="pixxio-integration",document.body.appendChild(e),this.element=e}}getMedia(e){return new Promise(((t,n)=>{e.max&&this.app.$set({max:e.max}),e.allowedTypes&&this.app.$set({allowedTypes:e.allowedTypes}),e.allowedFormats&&this.app.$set({allowedFormats:e.allowedFormats}),this.app.$set({show:!0}),this.app.$on("submit",(e=>{this.app.$set({show:!1}),t(e.detail)})),this.app.$on("cancel",(()=>{this.app.$set({show:!1}),n()}))}))}}window.PIXXIO=nt;export default nt;
