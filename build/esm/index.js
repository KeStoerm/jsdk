function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,s){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function c(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function r(e){e.parentNode.removeChild(e)}function u(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function f(e){return document.createTextNode(e)}function p(){return f(" ")}function h(){return f("")}function m(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function g(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t){e.value=null==t?"":t}function x(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function b(e,t,n){e.classList[n?"add":"remove"](t)}let y;function w(e){y=e}function k(){if(!y)throw new Error("Function called outside component initialization");return y}function _(e){k().$$.on_mount.push(e)}function z(){const e=k();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,l)}))}}}const F=[],T=[],S=[],C=[],E=Promise.resolve();let L=!1;function A(e){S.push(e)}function P(e){C.push(e)}let U=!1;const q=new Set;function N(){if(!U){U=!0;do{for(let e=0;e<F.length;e+=1){const t=F[e];w(t),M(t.$$)}for(w(null),F.length=0;T.length;)T.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];q.has(t)||(q.add(t),t())}S.length=0}while(F.length);for(;C.length;)C.pop()();L=!1,U=!1,q.clear()}}function M(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}const R=new Set;let H;function O(){H={r:0,c:[],p:H}}function j(){H.r||s(H.c),H=H.p}function I(e,t){e&&e.i&&(R.delete(e),e.i(t))}function K(e,t,n,s){if(e&&e.o){if(R.has(e))return;R.add(e),H.c.push((()=>{R.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function D(e,t){const n=t.token={};function s(e,s,l,o){if(t.token!==n)return;t.resolved=o;let i=t.ctx;void 0!==l&&(i=i.slice(),i[l]=o);const c=e&&(t.current=e)(i);let a=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==s&&e&&(O(),K(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),j())})):t.block.d(1),c.c(),I(c,1),c.m(t.mount(),t.anchor),a=!0),t.block=c,t.blocks&&(t.blocks[s]=c),a&&N()}if((l=e)&&"object"==typeof l&&"function"==typeof l.then){const n=k();if(e.then((e=>{w(n),s(t.then,1,t.value,e),w(null)}),(e=>{if(w(n),s(t.catch,2,t.error,e),w(null),!t.hasCatch)throw e})),t.current!==t.pending)return s(t.pending,0),!0}else{if(t.current!==t.then)return s(t.then,1,t.value,e),!0;t.resolved=e}var l}function B(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function V(e){e&&e.c()}function G(e,n,o,i){const{fragment:c,on_mount:a,on_destroy:r,after_update:u}=e.$$;c&&c.m(n,o),i||A((()=>{const n=a.map(t).filter(l);r?r.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(A)}function X(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(F.push(e),L||(L=!0,E.then(N)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function W(t,l,o,i,c,a,u=[-1]){const d=y;w(t);const f=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(f.ctx=o?o(t,l.props||{},((e,n,...s)=>{const l=s.length?s[0]:n;return f.ctx&&c(f.ctx[e],f.ctx[e]=l)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](l),p&&J(t,e)),n})):[],f.update(),p=!0,s(f.before_update),f.fragment=!!i&&i(f.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);f.fragment&&f.fragment.l(e),e.forEach(r)}else f.fragment&&f.fragment.c();l.intro&&I(t.$$.fragment),G(t,l.target,l.anchor,l.customElement),N()}w(d)}class Q{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Y(t){let n;return{c(){n=d("div"),n.innerHTML='<div class="header__logo svelte-fa509d"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 25.78" class="svelte-fa509d"><path d="M41.34 6.14a5.72 5.72 0 00-3.37-.97 5.54 5.54 0 00-3.33.97 4.9 4.9 0 00-1.07 1 1.58 1.58 0 00-1.58-1.59h-.18a.3.3 0 00-.3.31V24a.3.3 0 00.3.31h.42a1.61 1.61 0 001.61-1.61v-4.37a5.18 5.18 0 00.8.72 5.56 5.56 0 003.33 1 5.72 5.72 0 003.37-.96 6.59 6.59 0 002.17-2.65 8.96 8.96 0 00.76-3.79 8.85 8.85 0 00-.76-3.78 6.37 6.37 0 00-2.17-2.72zm0 9.15a4.11 4.11 0 01-1.37 1.89 3.6 3.6 0 01-2.3.69 3.63 3.63 0 01-3.69-2.58 8.39 8.39 0 01-.44-2.75 7.57 7.57 0 01.44-2.76 4.2 4.2 0 011.34-1.85 3.63 3.63 0 012.28-.66 3.96 3.96 0 012.37.69 4.3 4.3 0 011.38 1.9 7.32 7.32 0 01.44 2.68 7.45 7.45 0 01-.45 2.75z"></path><path d="M47.44 19.9h1.69a.3.3 0 00.31-.3V6.18a.3.3 0 00-.31-.3h-1.69a.3.3 0 00-.31.3V19.6a.3.3 0 00.31.3z"></path><path d="M81.31 15.38h1.7a.3.3 0 00.3-.31V6.26a.3.3 0 00-.3-.31h-1.7a.3.3 0 00-.3.31v8.8a.3.3 0 00.3.32z"></path><path d="M64.36 5.84h-1.97a.31.31 0 00-.27.14L58.4 11l-3.75-5.02a.44.44 0 00-.24-.14h-1.96a.31.31 0 00-.24.51l4.89 6.44-5 6.6a.32.32 0 00.25.52h1.96a.23.23 0 00.24-.14l3.85-5.2 3.86 5.23a.42.42 0 00.27.14h1.96a.31.31 0 00.24-.52l-4.99-6.6 4.89-6.44a.35.35 0 00-.27-.54z"></path><path d="M77.98 5.84h-1.96a.31.31 0 00-.28.14L72.03 11l-3.75-5.02a.44.44 0 00-.24-.14h-1.97a.31.31 0 00-.24.51l4.89 6.44-5.02 6.6a.32.32 0 00.24.52h1.96a.23.23 0 00.24-.14l3.85-5.2 3.86 5.2a.42.42 0 00.27.14h1.96a.31.31 0 00.24-.52l-4.99-6.6 4.89-6.44a.31.31 0 00-.24-.51z"></path><path d="M99.2 9.04a6.16 6.16 0 00-2.33-2.62 6.94 6.94 0 00-3.65-.96 6.68 6.68 0 00-3.58.93A6.26 6.26 0 0087.27 9a8.63 8.63 0 00-.83 3.9 8.58 8.58 0 00.83 3.84 6.4 6.4 0 002.34 2.62 7.37 7.37 0 007.22.03 6.16 6.16 0 002.34-2.61 8.63 8.63 0 00.83-3.89 8.05 8.05 0 00-.8-3.85zm-2.71 7.6a3.77 3.77 0 01-3.24 1.44 3.86 3.86 0 01-3.23-1.44 6.21 6.21 0 01-1.1-3.82 7.37 7.37 0 01.48-2.72 3.8 3.8 0 011.41-1.82 4.06 4.06 0 012.41-.66 3.84 3.84 0 013.23 1.41 6.1 6.1 0 011.07 3.79 5.92 5.92 0 01-1.03 3.82z"></path><path class="logoIcon svelte-fa509d" d="M81.31 19.77h1.7a.3.3 0 00.3-.31v-1.68a.3.3 0 00-.3-.31h-1.7a.3.3 0 00-.3.3v1.7a.3.3 0 00.3.3z"></path><path class="logoIcon svelte-fa509d" d="M13.18 25.78a13.48 13.48 0 01-6.75-1.82l-.68-.4v-3.4H2.27l-.41-.67A12.76 12.76 0 010 12.9 13.06 13.06 0 0113.18 0a13.06 13.06 0 0113.18 12.9 13.06 13.06 0 01-13.18 12.88zm-4.61-3.8a10.27 10.27 0 004.6 1.04A10.26 10.26 0 0023.54 12.9 10.23 10.23 0 0013.18 2.8 10.26 10.26 0 002.82 12.92a10.13 10.13 0 001.07 4.51h1.86v-4.5a7.37 7.37 0 017.43-7.28 7.37 7.37 0 017.43 7.27 7.37 7.37 0 01-7.43 7.27H8.57zm4.6-13.56a4.56 4.56 0 00-4.6 4.5v4.52h4.6a4.51 4.51 0 100-9.02z"></path></svg></div>',g(n,"class","header svelte-fa509d")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&r(n)}}}class Z extends Q{constructor(e){super(),W(this,e,null,Y,o,{})}}function ee(e){return{username:"Username",password:"Passwort",signin:"Anmelden",signin_description:"Bitte melde dich in dein pixxio System an um Dateien auszuwählen.",signin_error:"Ungültiger Benutzer oder Passwort",cancel:"Abbrechen",select:"Auswählen",selected:"ausgewählt",please_select:"Format wählen",original:"Original",preview:"Vorschau"}[e]}function te(t){let n;return{c(){n=d("div"),n.innerHTML='<div class="svelte-2yi7ym"><svg xmlns="http://www.w3.org/2000/svg" id="pixxioIcon" viewBox="0 0 76.52 76.52" class="svelte-2yi7ym"><path stroke="black" stroke-width="5" d="M24.76 50.76v-13c0-7.17 5.94-13 13.25-13s13.25 5.83 13.25 13c0 7.18-5.94 13-13.25 13H26.27l-11.17.38s-3.34-8.2-3.34-12.88a26.51 26.51 0 0126.5-26.5 26.51 26.51 0 0126.5 26.5 26.51 26.51 0 01-26.5 26.5c-4.85 0-9.58-1.3-13.5-3.6z" fill="none" class="svelte-2yi7ym"></path></svg></div>',g(n,"id","pixxio-ta-loading"),g(n,"class","svelte-2yi7ym")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&r(n)}}}class ne extends Q{constructor(e){super(),W(this,e,null,te,o,{})}}const se=[];function le(t,n=e){let s;const l=[];function i(e){if(o(t,e)&&(t=e,s)){const e=!se.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),se.push(n,t)}if(e){for(let e=0;e<se.length;e+=2)se[e][0](se[e+1]);se.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,c=e){const a=[o,c];return l.push(a),1===l.length&&(s=n(i)||e),o(t),()=>{const e=l.indexOf(a);-1!==e&&l.splice(e,1),0===l.length&&(s(),s=null)}}}}const oe=le(""),ie=le(""),ce=le(""),ae=le(""),re=le(""),ue=le("preview");function de(t){let n,l,o,i,u,f,h;return{c(){n=d("div"),l=d("div"),o=d("input"),i=p(),u=d("label"),u.textContent="Search",g(o,"id","pixxio-search"),g(o,"type","text"),g(o,"placeholder"," "),g(o,"class","svelte-gmuv5t"),g(u,"for","pixxio-search"),g(u,"class","svelte-gmuv5t"),g(l,"class","field svelte-gmuv5t"),g(n,"class","searchField fields svelte-gmuv5t")},m(e,s){a(e,n,s),c(n,l),c(l,o),v(o,t[0]),c(l,i),c(l,u),f||(h=[m(o,"input",t[2]),m(o,"input",t[1])],f=!0)},p(e,[t]){1&t&&o.value!==e[0]&&v(o,e[0])},i:e,o:e,d(e){e&&r(n),f=!1,s(h)}}}function fe(e,t,n){let{value:s=""}=t,l=null;return e.$$set=e=>{"value"in e&&n(0,s=e.value)},[s,()=>{l&&clearTimeout(l),l=setTimeout((()=>{re.update((()=>s))}),200)},function(){s=this.value,n(0,s)}]}class pe extends Q{constructor(e){super(),W(this,e,fe,de,o,{value:0})}}class he{accessToken="";refreshToken="";domain="";appKey="";constructor(){oe.subscribe((e=>this.domain=e)),ie.subscribe((e=>this.appKey=e)),ce.subscribe((e=>this.refreshToken=e)),ae.subscribe((e=>this.accessToken=e))}get(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("get",e,t,n,s,l,o)}post(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("post",e,t,n,s,l,o)}put(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("put",e,t,n,s,l,o)}delete(e,t={},n=!0,s=null,l=!0,o=!0){return this.call("delete",e,t,n,s,l,o)}callAccessToken(){return new Promise(((e,t)=>{this.post("/accessToken",{refreshToken:this.refreshToken,applicationKey:this.appKey},!1).then((n=>{n.success?(this.accessToken=n.accessToken,ae.update((()=>n.accessToken)),e()):t()})).catch(t)}))}call(e,t,n={},s=!0,l=null,o=!0,i=!0){return new Promise(((c,a)=>{const r=(s,r)=>{const u=this.domain+"/gobackend"+t;let d=s;if(i){d=new URLSearchParams;for(const e of Object.keys(s)){let t=s[e];"object"==typeof t&&(t=JSON.stringify(t)),d.set(e,t)}d=d.toString()}r||(r={}),o&&(r["Content-Type"]="application/x-www-form-urlencoded"),l&&(r={...r,...l});let f={url:u,request:{method:"post",headers:r,body:d}};switch(e){case"get":f={url:u+"?"+d,request:{headers:r}};break;case"put":f={url:u,request:{method:"put",headers:r,body:d}};break;case"delete":f={url:u,request:{method:"delete",headers:r,body:d}}}fetch(f.url,f.request).then((e=>e.json())).then((s=>{if(!0===s.success||"true"===s.success)c(s);else switch(s.errorcode){case"2003":case"2006":case 15007:case 15008:this.callAccessToken().then((()=>{this.call(e,t,n).subscribe((e=>{c(e)}))}));break;case 5266:default:a(s.errormessage)}})).catch((e=>a()))};if(s){const e=this.accessToken,t={Authorization:"Key "+e};n.accessToken=e,r(n,t)}else r(n)}))}}function me(t){let n;return{c(){n=d("small"),n.textContent=`${ee("signin_error")}`,g(n,"class","error svelte-sim3ue")},m(e,t){a(e,n,t)},p:e,d(e){e&&r(n)}}}function ge(e){let t,n;return t=new ne({}),{c(){V(t.$$.fragment)},m(e,s){G(t,e,s),n=!0},i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){K(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function $e(e){let t,n,l,o,i,u,h,$,x,b,y,w,k,_,z,F,T,S,C,E,L,A,P,U,q,N=ee("signin")+"",M=e[2]&&me(),R=e[3]&&ge();return{c(){t=d("div"),n=d("h2"),n.textContent=`${ee("signin")}`,l=p(),o=d("p"),o.textContent=`${ee("signin_description")}`,i=p(),u=d("div"),h=d("input"),$=p(),x=d("label"),x.textContent=`${ee("username")}`,b=p(),y=d("div"),w=d("input"),k=p(),_=d("label"),_.textContent=`${ee("password")}`,z=p(),M&&M.c(),F=p(),T=d("div"),S=d("button"),S.textContent=`${ee("cancel")}`,C=p(),E=d("button"),L=f(N),A=p(),R&&R.c(),g(n,"class","svelte-sim3ue"),g(o,"class","svelte-sim3ue"),g(h,"id","pixxio-username"),h.disabled=e[3],g(h,"type","text"),g(h,"placeholder"," "),g(h,"class","svelte-sim3ue"),g(x,"for","pixxio-username"),g(x,"class","svelte-sim3ue"),g(u,"class","field svelte-sim3ue"),g(w,"id","pixxio-password"),w.disabled=e[3],g(w,"type","password"),g(w,"placeholder"," "),g(w,"class","svelte-sim3ue"),g(_,"for","pixxio-password"),g(_,"class","svelte-sim3ue"),g(y,"class","field svelte-sim3ue"),g(S,"class","button button--secondary svelte-sim3ue"),g(E,"class","button svelte-sim3ue"),g(E,"type","submit"),E.disabled=e[3],g(T,"class","buttonGroup svelte-sim3ue"),g(t,"class","login fields svelte-sim3ue")},m(s,r){a(s,t,r),c(t,n),c(t,l),c(t,o),c(t,i),c(t,u),c(u,h),v(h,e[0]),c(u,$),c(u,x),c(t,b),c(t,y),c(y,w),v(w,e[1]),c(y,k),c(y,_),c(t,z),M&&M.m(t,null),c(t,F),c(t,T),c(T,S),c(T,C),c(T,E),c(E,L),c(t,A),R&&R.m(t,null),P=!0,U||(q=[m(h,"input",e[8]),m(w,"input",e[9]),m(S,"click",e[5]),m(E,"click",e[4])],U=!0)},p(e,[n]){(!P||8&n)&&(h.disabled=e[3]),1&n&&h.value!==e[0]&&v(h,e[0]),(!P||8&n)&&(w.disabled=e[3]),2&n&&w.value!==e[1]&&v(w,e[1]),e[2]?M?M.p(e,n):(M=me(),M.c(),M.m(t,F)):M&&(M.d(1),M=null),(!P||8&n)&&(E.disabled=e[3]),e[3]?R?8&n&&I(R,1):(R=ge(),R.c(),I(R,1),R.m(t,null)):R&&(O(),K(R,1,1,(()=>{R=null})),j())},i(e){P||(I(R),P=!0)},o(e){K(R),P=!1},d(e){e&&r(t),M&&M.d(),R&&R.d(),U=!1,s(q)}}}function ve(e,t,n){let s,l,o,c;i(e,oe,(e=>n(6,o=e))),i(e,ie,(e=>n(7,c=e)));const a=z(),r=new he;let u="",d="",f=!1,p=!1;const h=sessionStorage.getItem("refreshToken");h&&(p=!0,ce.update((()=>h)),r.callAccessToken().then((()=>{n(3,p=!1),a("authenticated")})).catch((e=>{ce.update((()=>"")),n(3,p=!1)})));return e.$$.update=()=>{64&e.$$.dirty&&(s=o),128&e.$$.dirty&&(l=c)},[u,d,f,p,async()=>{n(3,p=!0),n(2,f=!1);try{const e=new FormData;e.set("applicationKey",l),e.set("userName",u),e.set("password",d);const t=await fetch(`${s}/gobackend/login`,{method:"POST",body:e}),o=await t.json();if(n(3,p=!1),!o.success)throw n(2,f=!0),new Error;ce.update((()=>o.refreshToken)),sessionStorage.setItem("refreshToken",o.refreshToken),r.callAccessToken().then((()=>{a("authenticated")}))}catch(e){n(3,p=!1),n(2,f=!0)}},()=>{a("cancel")},o,c,function(){u=this.value,n(0,u)},function(){d=this.value,n(1,d)}]}class xe extends Q{constructor(e){super(),W(this,e,ve,$e,o,{})}}function be(e,t,n){const s=e.slice();return s[9]=t[n],s}function ye(e){let t,n,s,l=e[9].name+"";return{c(){t=d("option"),n=f(l),t.__value=s=e[9].id,t.value=t.__value},m(e,s){a(e,t,s),c(t,n)},p(e,o){2&o&&l!==(l=e[9].name+"")&&$(n,l),2&o&&s!==(s=e[9].id)&&(t.__value=s,t.value=t.__value)},d(e){e&&r(t)}}}function we(t){let n,l,o,i,f,$,v,b,y,w=function(t){let n;return{c(){n=d("option"),n.textContent=`${ee("preview")}`,n.__value="preview",n.value=n.__value},m(e,t){a(e,n,t)},p:e,d(e){e&&r(n)}}}(),k=function(t){let n;return{c(){n=d("option"),n.textContent=`${ee("original")}`,n.__value="original",n.value=n.__value},m(e,t){a(e,n,t)},p:e,d(e){e&&r(n)}}}(),_=t[1],z=[];for(let e=0;e<_.length;e+=1)z[e]=ye(be(t,_,e));return{c(){n=d("div"),l=d("div"),o=d("select"),w&&w.c(),i=h(),k&&k.c(),f=h();for(let e=0;e<z.length;e+=1)z[e].c();$=p(),v=d("label"),v.textContent=`${ee("please_select")}`,g(o,"name",""),g(o,"id","pixxioDownloadFormats__dropdown"),g(o,"placeholder"," "),g(o,"class","svelte-1x1v299"),void 0===t[0]&&A((()=>t[3].call(o))),g(v,"for","pixxioDownloadFormats__dropdown"),g(v,"class","svelte-1x1v299"),g(l,"class","field svelte-1x1v299"),g(n,"class","downloadFormats fields svelte-1x1v299")},m(e,s){a(e,n,s),c(n,l),c(l,o),w&&w.m(o,null),c(o,i),k&&k.m(o,null),c(o,f);for(let e=0;e<z.length;e+=1)z[e].m(o,null);x(o,t[0]),c(l,$),c(l,v),b||(y=[m(o,"change",t[3]),m(o,"change",t[2])],b=!0)},p(e,[t]){if(w.p(e,t),k.p(e,t),2&t){let n;for(_=e[1],n=0;n<_.length;n+=1){const s=be(e,_,n);z[n]?z[n].p(s,t):(z[n]=ye(s),z[n].c(),z[n].m(o,null))}for(;n<z.length;n+=1)z[n].d(1);z.length=_.length}3&t&&x(o,e[0])},i:e,o:e,d(e){e&&r(n),w&&w.d(),k&&k.d(),u(z,e),b=!1,s(y)}}}function ke(e,t,n){let s;z(),new he;let l=[];_((()=>{o()}));const o=()=>{ue.update((()=>s))};return[s,l,o,function(){s=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(0,s),n(1,l)}]}class _e extends Q{constructor(e){super(),W(this,e,ke,we,o,{})}}function ze(e,t,n){const s=e.slice();return s[3]=t[n],s}function Fe(e){let t,n,s,o,i,u;return{c(){t=d("li"),n=d("img"),g(n,"loading","lazy"),n.src!==(s=e[3].modifiedPreviewFileURLs[0])&&g(n,"src",s),g(n,"alt",o=e[3].fileName),g(n,"class","svelte-2dn8sz"),g(t,"class","pixxioSelection__file svelte-2dn8sz")},m(s,o){a(s,t,o),c(t,n),i||(u=m(t,"click",(function(){l(e[2]("deselect",e[3]))&&e[2]("deselect",e[3]).apply(this,arguments)})),i=!0)},p(t,l){e=t,2&l&&n.src!==(s=e[3].modifiedPreviewFileURLs[0])&&g(n,"src",s),2&l&&o!==(o=e[3].fileName)&&g(n,"alt",o)},d(e){e&&r(t),i=!1,u()}}}function Te(e){let t,n,s,l=e[0].length-e[1].length+"";return{c(){t=d("li"),n=f("+ "),s=f(l),g(t,"class","svelte-2dn8sz")},m(e,l){a(e,t,l),c(t,n),c(t,s)},p(e,t){3&t&&l!==(l=e[0].length-e[1].length+"")&&$(s,l)},d(e){e&&r(t)}}}function Se(t){let n,s,l=t[1],o=[];for(let e=0;e<l.length;e+=1)o[e]=Fe(ze(t,l,e));let i=t[0].length>3&&Te(t);return{c(){n=d("ul");for(let e=0;e<o.length;e+=1)o[e].c();s=p(),i&&i.c(),g(n,"class","svelte-2dn8sz")},m(e,t){a(e,n,t);for(let e=0;e<o.length;e+=1)o[e].m(n,null);c(n,s),i&&i.m(n,null)},p(e,[t]){if(6&t){let i;for(l=e[1],i=0;i<l.length;i+=1){const c=ze(e,l,i);o[i]?o[i].p(c,t):(o[i]=Fe(c),o[i].c(),o[i].m(n,s))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}e[0].length>3?i?i.p(e,t):(i=Te(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:e,o:e,d(e){e&&r(n),u(o,e),i&&i.d()}}}function Ce(e,t,n){let s;const l=z();let{selectedFiles:o=[]}=t;return e.$$set=e=>{"selectedFiles"in e&&n(0,o=e.selectedFiles)},e.$$.update=()=>{1&e.$$.dirty&&n(1,s=o.slice(0,3))},[o,s,l]}class Ee extends Q{constructor(e){super(),W(this,e,Ce,Se,o,{selectedFiles:0})}}function Le(e){let t,n,s,l,o,i,u,h,v,x,y,w=e[0].fileName+"";return{c(){t=d("li"),n=d("figure"),s=d("div"),l=d("img"),u=p(),h=d("figcaption"),v=f(w),g(l,"loading","lazy"),l.src!==(o=e[0].modifiedPreviewFileURLs[0])&&g(l,"src",o),g(l,"alt",i=e[0].fileName),g(l,"class","svelte-e9o60a"),g(s,"class","pixxioSquare svelte-e9o60a"),b(s,"pixxioSquare--active",e[0].selected),g(h,"class","svelte-e9o60a"),g(n,"class","svelte-e9o60a"),g(t,"class","svelte-e9o60a")},m(o,i){a(o,t,i),c(t,n),c(n,s),c(s,l),c(n,u),c(n,h),c(h,v),x||(y=m(t,"click",e[3]),x=!0)},p(e,t){1&t&&l.src!==(o=e[0].modifiedPreviewFileURLs[0])&&g(l,"src",o),1&t&&i!==(i=e[0].fileName)&&g(l,"alt",i),1&t&&b(s,"pixxioSquare--active",e[0].selected),1&t&&w!==(w=e[0].fileName+"")&&$(v,w)},d(e){e&&r(t),x=!1,y()}}}function Ae(t){let n,s=t[0]&&Le(t);return{c(){s&&s.c(),n=h()},m(e,t){s&&s.m(e,t),a(e,n,t)},p(e,[t]){e[0]?s?s.p(e,t):(s=Le(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:e,o:e,d(e){s&&s.d(e),e&&r(n)}}}function Pe(e,t,n){let{file:s=null}=t,{selected:l=!1}=t;const o=z(),i=()=>{o(l?"deselect":"select",s)};return e.$$set=e=>{"file"in e&&n(0,s=e.file),"selected"in e&&n(2,l=e.selected)},[s,i,l,()=>i()]}class Ue extends Q{constructor(e){super(),W(this,e,Pe,Ae,o,{file:0,selected:2})}}function qe(e,t,n){const s=e.slice();return s[25]=t[n],s[26]=t,s[27]=n,s}function Ne(t){let n;return{c(){n=f("error")},m(e,t){a(e,n,t)},p:e,i:e,o:e,d(e){e&&r(n)}}}function Me(e){let t,n,l,o,i,h,v,x,y,w,k,_,z,F,S,C,E,L,A,U,q,N,M,R,H,D,J,W,Q=e[0]?"/"+e[0]:"",Y=ee("selected")+"",Z=ee("select")+"",te=e[4],ne=[];for(let t=0;t<te.length;t+=1)ne[t]=Re(qe(e,te,t));const se=e=>K(ne[e],1,1,(()=>{ne[e]=null}));function le(t){e[16](t)}i=new _e({});let oe={};return void 0!==e[1]&&(oe.selectedFiles=e[1]),C=new Ee({props:oe}),T.push((()=>B(C,"selectedFiles",le))),C.$on("deselect",e[10]),{c(){t=d("section"),n=d("ul");for(let e=0;e<ne.length;e+=1)ne[e].c();var s,c,a;l=p(),o=d("div"),V(i.$$.fragment),h=p(),v=d("div"),x=d("p"),y=d("strong"),w=f(e[2]),k=p(),_=f(Q),z=p(),F=f(Y),S=p(),V(C.$$.fragment),L=p(),A=d("span"),U=p(),q=d("button"),q.textContent=`${ee("cancel")}`,N=p(),M=d("button"),R=f(Z),g(n,"class","svelte-1z0y19a"),g(t,"id","pixxioFiles__container"),g(t,"class","svelte-1z0y19a"),b(t,"pixxioFiles__container--maxReached",e[5]),g(o,"class","pixxioFormats svelte-1z0y19a"),s="flex-grow",c="1",A.style.setProperty(s,c,a?"important":""),g(q,"class","button button--secondary svelte-1z0y19a"),g(M,"class","button svelte-1z0y19a"),g(M,"type","submit"),M.disabled=H=!e[6],g(v,"class","buttonGroup buttonGroup--right svelte-1z0y19a")},m(s,r){a(s,t,r),c(t,n);for(let e=0;e<ne.length;e+=1)ne[e].m(n,null);a(s,l,r),a(s,o,r),G(i,o,null),a(s,h,r),a(s,v,r),c(v,x),c(x,y),c(y,w),c(x,k),c(x,_),c(x,z),c(x,F),c(v,S),G(C,v,null),c(v,L),c(v,A),c(v,U),c(v,q),c(v,N),c(v,M),c(M,R),D=!0,J||(W=[m(t,"scroll",e[8]),m(q,"click",e[17]),m(M,"click",e[11])],J=!0)},p(e,s){if(1552&s){let t;for(te=e[4],t=0;t<te.length;t+=1){const l=qe(e,te,t);ne[t]?(ne[t].p(l,s),I(ne[t],1)):(ne[t]=Re(l),ne[t].c(),I(ne[t],1),ne[t].m(n,null))}for(O(),t=te.length;t<ne.length;t+=1)se(t);j()}32&s&&b(t,"pixxioFiles__container--maxReached",e[5]),(!D||4&s)&&$(w,e[2]),(!D||1&s)&&Q!==(Q=e[0]?"/"+e[0]:"")&&$(_,Q);const l={};!E&&2&s&&(E=!0,l.selectedFiles=e[1],P((()=>E=!1))),C.$set(l),(!D||64&s&&H!==(H=!e[6]))&&(M.disabled=H)},i(e){if(!D){for(let e=0;e<te.length;e+=1)I(ne[e]);I(i.$$.fragment,e),I(C.$$.fragment,e),D=!0}},o(e){ne=ne.filter(Boolean);for(let e=0;e<ne.length;e+=1)K(ne[e]);K(i.$$.fragment,e),K(C.$$.fragment,e),D=!1},d(e){e&&r(t),u(ne,e),e&&r(l),e&&r(o),X(i),e&&r(h),e&&r(v),X(C),J=!1,s(W)}}}function Re(e){let t,n,s,l;function o(t){e[14](t,e[25],e[26],e[27])}function i(t){e[15](t,e[25])}let c={};return void 0!==e[25]&&(c.file=e[25]),void 0!==e[25].selected&&(c.selected=e[25].selected),t=new Ue({props:c}),T.push((()=>B(t,"file",o))),T.push((()=>B(t,"selected",i))),t.$on("select",e[9]),t.$on("deselect",e[10]),{c(){V(t.$$.fragment)},m(e,n){G(t,e,n),l=!0},p(l,o){e=l;const i={};!n&&16&o&&(n=!0,i.file=e[25],P((()=>n=!1))),!s&&16&o&&(s=!0,i.selected=e[25].selected,P((()=>s=!1))),t.$set(i)},i(e){l||(I(t.$$.fragment,e),l=!0)},o(e){K(t.$$.fragment,e),l=!1},d(e){X(t,e)}}}function He(t){let n,s;return n=new ne({}),{c(){V(n.$$.fragment)},m(e,t){G(n,e,t),s=!0},p:e,i(e){s||(I(n.$$.fragment,e),s=!0)},o(e){K(n.$$.fragment,e),s=!1},d(e){X(n,e)}}}function Oe(e){let t,n,s,l={ctx:e,current:null,token:null,hasCatch:!0,pending:He,then:Me,catch:Ne,blocks:[,,,]};return D(n=e[3],l),{c(){t=d("div"),l.block.c(),g(t,"class","pixxioFiles svelte-1z0y19a")},m(e,n){a(e,t,n),l.block.m(t,l.anchor=null),l.mount=()=>t,l.anchor=null,s=!0},p(t,[s]){if(e=t,l.ctx=e,8&s&&n!==(n=e[3])&&D(n,l));else{const t=e.slice();l.block.p(t,s)}},i(e){s||(I(l.block),s=!0)},o(e){for(let e=0;e<3;e+=1){K(l.blocks[e])}s=!1},d(e){e&&r(t),l.block.d(),l.token=null,l=null}}}function je(e,t,n){let s,l,o,c,a;i(e,ue,(e=>n(13,a=e)));const r=z(),u=new he;let{max:d=0}=t,f=null,p=1,h=[],m=0,g=!1,$="",v=[];_((()=>{n(3,f=x()),re.subscribe((e=>{$=e,x()}))}));const x=async e=>{try{g=!0;const t={page:p,pageSize:50,responseFields:["id","modifiedPreviewFileURLs","previewFileURL","originalFileURL","width","height","fileName","fileExtension","uploadDate","modifyDate","rating","userID","fileSize","dominantColor"],previewFileOptions:[{height:400,quality:60}],...$?{filter:{filterType:"searchTerm",term:$}}:{}},s=await u.get("/files",t);if(!s.success)throw new Error(s.errormessage);s.files=s.files.map((e=>(e.selected=v.find((t=>t.id===e.id)),e))),e?n(4,h=[...h,...s.files]):(n(4,h=s.files),m=s.quantity),g=!1}catch(e){g=!1}};return e.$$set=e=>{"max"in e&&n(0,d=e.max)},e.$$.update=()=>{2&e.$$.dirty&&n(2,s=v.length),5&e.$$.dirty&&n(5,l=s>=d&&d),8192&e.$$.dirty&&n(12,c=a),4100&e.$$.dirty&&n(6,o=s>=1&&c)},[d,v,s,f,h,l,o,r,e=>{if(g||h.length>=m)return;e.target.scrollHeight-e.target.scrollTop-e.target.offsetHeight<e.target.offsetHeight/2&&(p+=1,x(!0))},e=>{if(d&&d<=v.length)return;h.find((t=>t.id===e.detail.id)).selected=!0,n(4,h),n(1,v=[...v,e.detail])},e=>{h.find((t=>t.id===e.detail.id)).selected=!1,n(4,h),n(1,v=v.filter((t=>t.id!==e.detail.id)))},async()=>{r("submit",v.map((e=>({url:"preview"===c?e.previewFileURL:e.originalFileURL,thumbnail:e.modifiedPreviewFileURLs[0]}))))},c,a,function(e,t,s,l){s[l]=e,n(4,h)},function(t,s){e.$$.not_equal(s.selected,t)&&(s.selected=t,n(4,h))},function(e){v=e,n(1,v)},()=>r("cancel")]}class Ie extends Q{constructor(e){super(),W(this,e,je,Oe,o,{max:0})}}function Ke(e){let t,n,s,l,o,i,u,f,h=e[1]&&De(),m=e[3]&&Be(e);const $=[Ge,Ve],v=[];function x(e,t){return e[3]?1:0}return i=x(e),u=v[i]=$[i](e),{c(){t=d("main"),n=d("div"),s=d("header"),h&&h.c(),l=p(),m&&m.c(),o=p(),u.c(),g(s,"class","svelte-1c8ayef"),g(n,"class","container svelte-1c8ayef"),b(n,"container--enlarge",e[5]),g(t,"class","svelte-1c8ayef")},m(e,r){a(e,t,r),c(t,n),c(n,s),h&&h.m(s,null),c(s,l),m&&m.m(s,null),c(n,o),v[i].m(n,null),f=!0},p(e,t){e[1]?h?2&t&&I(h,1):(h=De(),h.c(),I(h,1),h.m(s,l)):h&&(O(),K(h,1,1,(()=>{h=null})),j()),e[3]?m?(m.p(e,t),8&t&&I(m,1)):(m=Be(e),m.c(),I(m,1),m.m(s,null)):m&&(O(),K(m,1,1,(()=>{m=null})),j());let o=i;i=x(e),i===o?v[i].p(e,t):(O(),K(v[o],1,1,(()=>{v[o]=null})),j(),u=v[i],u?u.p(e,t):(u=v[i]=$[i](e),u.c()),I(u,1),u.m(n,null)),32&t&&b(n,"container--enlarge",e[5])},i(e){f||(I(h),I(m),I(u),f=!0)},o(e){K(h),K(m),K(u),f=!1},d(e){e&&r(t),h&&h.d(),m&&m.d(),v[i].d()}}}function De(e){let t,n;return t=new Z({}),{c(){V(t.$$.fragment)},m(e,s){G(t,e,s),n=!0},i(e){n||(I(t.$$.fragment,e),n=!0)},o(e){K(t.$$.fragment,e),n=!1},d(e){X(t,e)}}}function Be(e){let t,n,s;function l(t){e[10](t)}let o={};return void 0!==e[4]&&(o.value=e[4]),t=new pe({props:o}),T.push((()=>B(t,"value",l))),{c(){V(t.$$.fragment)},m(e,n){G(t,e,n),s=!0},p(e,s){const l={};!n&&16&s&&(n=!0,l.value=e[4],P((()=>n=!1))),t.$set(l)},i(e){s||(I(t.$$.fragment,e),s=!0)},o(e){K(t.$$.fragment,e),s=!1},d(e){X(t,e)}}}function Ve(e){let t,n,s,l;function o(t){e[11](t)}let i={};return void 0!==e[0]&&(i.max=e[0]),n=new Ie({props:i}),T.push((()=>B(n,"max",o))),n.$on("cancel",e[7]),n.$on("submit",e[8]),{c(){t=d("section"),V(n.$$.fragment)},m(e,s){a(e,t,s),G(n,t,null),l=!0},p(e,t){const l={};!s&&1&t&&(s=!0,l.max=e[0],P((()=>s=!1))),n.$set(l)},i(e){l||(I(n.$$.fragment,e),l=!0)},o(e){K(n.$$.fragment,e),l=!1},d(e){e&&r(t),X(n)}}}function Ge(t){let n,s,l;return s=new xe({}),s.$on("cancel",t[7]),s.$on("authenticated",t[6]),{c(){n=d("section"),V(s.$$.fragment)},m(e,t){a(e,n,t),G(s,n,null),l=!0},p:e,i(e){l||(I(s.$$.fragment,e),l=!0)},o(e){K(s.$$.fragment,e),l=!1},d(e){e&&r(n),X(s)}}}function Xe(e){let t,n,s,l,o,i=e[2]&&Ke(e);return{c(){i&&i.c(),t=p(),n=d("link"),s=d("link"),l=d("style"),l.textContent="/* Global CSS via SASS */\n#pixxio-integration {\n  font-family: 'Heebo', Arial, Helvetica, sans-serif;\n  font-size: 16px;\n  all: initial; }",g(n,"rel","preconnect"),g(n,"href","https://fonts.gstatic.com"),g(n,"crossorigin",""),g(s,"href","https://fonts.googleapis.com/css2?family=Heebo:wght@400;700&family=Work+Sans:wght@400;500&display=swap"),g(s,"rel","stylesheet"),g(l,"lang","scss")},m(e,r){i&&i.m(e,r),a(e,t,r),c(document.head,n),c(document.head,s),c(document.head,l),o=!0},p(e,[n]){e[2]?i?(i.p(e,n),4&n&&I(i,1)):(i=Ke(e),i.c(),I(i,1),i.m(t.parentNode,t)):i&&(O(),K(i,1,1,(()=>{i=null})),j())},i(e){o||(I(i),o=!0)},o(e){K(i),o=!1},d(e){i&&i.d(e),e&&r(t),r(n),r(s),r(l)}}}function Je(e,t,n){let s,{standalone:l=!1}=t,{config:o={appUrl:"",appKey:""}}=t,{show:i=!1}=t,{max:c=0}=t;const a=z();_((async()=>{oe.update((()=>o.appUrl)),ie.update((()=>o.appKey))}));let r=!1,u="";return e.$$set=e=>{"standalone"in e&&n(1,l=e.standalone),"config"in e&&n(9,o=e.config),"show"in e&&n(2,i=e.show),"max"in e&&n(0,c=e.max)},e.$$.update=()=>{8&e.$$.dirty&&n(5,s=r)},[c,l,i,r,u,s,()=>{n(3,r=!0)},()=>{a("cancel")},({detail:e})=>{a("submit",e)},o,function(e){u=e,n(4,u)},function(e){c=e,n(0,c)}]}class We extends Q{constructor(e){super(),W(this,e,Je,Xe,o,{standalone:1,config:9,show:2,max:0})}}class Qe{constructor(e={},t="en"){this.boot(),this.config=e,this.app=new We({target:document.querySelector("#pixxio-integration"),props:{standalone:!0,config:e}})}boot(){const e=document.createElement("div");e.id="pixxio-integration",document.body.appendChild(e)}getMedia(e){return new Promise(((t,n)=>{e.max&&this.app.$set({max:e.max}),this.app.$set({show:!0}),this.app.$on("submit",(e=>{this.app.$set({show:!1}),t(e.detail)})),this.app.$on("cancel",(()=>{this.app.$set({show:!1}),n()}))}))}}window.PIXXIO=Qe;export default Qe;
